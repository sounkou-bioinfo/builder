<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>directives</title>
        <link rel="stylesheet" href="style.css" />
        <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      /* The extra [class] is a hack that increases specificity enough to
         override a similar rule in reveal.js */
      ul.task-list[class]{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        font-size: inherit;
        width: 0.8em;
        margin: 0 0.8em 0.2em -1.6em;
        vertical-align: middle;
      }
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    </style>
  </head>
  <body>
    <nav>
      <a href="index.html">Home</a>
      <a href="packages.html">Packages</a>
      <a href="directives.html">Directives</a>
      <a href="macros.html">Macros</a>
      <a href="include.html">Include</a>
      <a href="import.html">Import</a>
      <a href="fstrings.html">F-strings</a>
      <a href="const.html">Const</a>
      <a href="deconstruct.html">Deconstruct</a>
      <a href="preflight.html">Preflight</a>
      <a href="plugins.html">Plugins</a>
      <a href="tests.html">Tests</a>
    </nav>
    <main><h1 id="directives">Directives</h1>
<p>Builder lets you use directives in your R files and via the command
line.</p>
<h2 id="command-line">Command line</h2>
<p>You can pass definitions via the command line using <code>-D</code>
flags. This is useful for setting build-time constants without modifying
your source files.</p>
<p><strong>Syntax:</strong> <code>-D&lt;NAME&gt;</code> for boolean
flags, or <code>-D&lt;NAME&gt; &lt;value&gt;</code> for valued
definitions.</p>
<pre><code>./builder -input srcr -output R -DDEBUG -DTEST &#39;&quot;a string&quot;&#39; -DXXX 42</code></pre>
<p>Note: Command-line definitions override file-based
<code>#define</code> directives.</p>
<h2 id="define">#define</h2>
<p>Define macros or constants that will be replaced throughout your
code. All occurrences of the defined name will be replaced with the
specified value.</p>
<p><strong>Syntax:</strong> <code>#define NAME value</code></p>
<pre><code>#define PI 3.14159
#define STRING &quot;hello world!&quot;

x &lt;- PI  # becomes: x &lt;- 3.14159
print(STRING)  # becomes: print(&quot;hello world!&quot;)</code></pre>
<h2 id="ifdef">#ifdef</h2>
<p>Include a code block only if the specified name is defined (either
via <code>#define</code> or command-line <code>-D</code> flag).</p>
<p><strong>Syntax:</strong> <code>#ifdef NAME ... #endif</code></p>
<pre><code>#ifdef DEBUG
cat(&quot;debugging!\n&quot;)
#endif

# With #else for alternative path
#ifdef DEBUG
cat(&quot;debug!&quot;)
#else
cat(&quot;world!&quot;)
#endif</code></pre>
<h2 id="ifndef">#ifndef</h2>
<p>Include a code block only if the specified name is NOT defined. This
is the opposite of <code>#ifdef</code>.</p>
<p><strong>Syntax:</strong> <code>#ifndef NAME ... #endif</code></p>
<pre><code>#ifndef PROD
cat(&quot;Not in production mode&quot;)
#endif</code></pre>
<h2 id="if">#if</h2>
<p>Evaluate an R expression and include the code block if the result is
TRUE. The expression is evaluated using the embedded R interpreter and
supports any valid R expression that returns a logical value.</p>
<p><strong>Syntax:</strong> <code>#if R_EXPRESSION ... #endif</code></p>
<pre><code>#define VERSION 3

#if VERSION &gt; 2
cat(&quot;Using new API\n&quot;)
#endif

#if XXX &gt; 1
cat(&quot;it&#39;s 1!\n&quot;)
#endif</code></pre>
<h2 id="else">#else</h2>
<p>Provide an alternative code path for conditional blocks. Used with
<code>#ifdef</code>, <code>#ifndef</code>, or <code>#if</code> to
specify code that should be included when the condition is false.</p>
<p>See the <code>#ifdef</code> example above for usage.</p>
<h2 id="endif">#endif</h2>
<p>Close a conditional compilation block. Required for all conditional
directives (<code>#ifdef</code>, <code>#ifndef</code>,
<code>#if</code>).</p>
<h2 id="file"><strong>FILE</strong></h2>
<p>A built-in directive that is automatically replaced with the current
source file path. Useful for debugging and logging to track which file
generated specific code.</p>
<pre><code>cat(&quot;Processing file: __FILE__\n&quot;)
# If in srcr/analysis.R, becomes: cat(&quot;Processing file: srcr/analysis.R \n&quot;)</code></pre>
<h2 id="line"><strong>LINE</strong></h2>
<p>A built-in directive that is automatically replaced with the current
line number in the source file. Useful for debugging and error tracking
to identify the exact location of code execution.</p>
<pre><code>cat(&quot;Executing line __LINE__\n&quot;)
# If on line 42, becomes: cat(&quot;Executing line 42\n&quot;)</code></pre>
<h2 id="os"><strong>OS</strong></h2>
<p>A built-in directive that is automatically populated with the current
operating system. Useful for conditionally compiling code based on the
current OS.</p>
<pre><code>cat(&quot;Running on: __OS__\n&quot;)
# becomes: cat(&quot;Running on: Linux\n&quot;)</code></pre></main>
  </body>
</html>
