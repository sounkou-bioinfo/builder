<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Plugins</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      /* The extra [class] is a hack that increases specificity enough to
         override a similar rule in reveal.js */
      ul.task-list[class]{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        font-size: inherit;
        width: 0.8em;
        margin: 0 0.8em 0.2em -1.6em;
        vertical-align: middle;
      }
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
      /* CSS for syntax highlighting */
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        { color: #ebdbb2; background-color: #282828; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span { color: #ebdbb2; } /* Normal */
      code span.al { color: #282828; background-color: #cc241d; font-weight: bold; } /* Alert */
      code span.an { color: #98971a; } /* Annotation */
      code span.at { color: #d79921; } /* Attribute */
      code span.bn { color: #f67400; } /* BaseN */
      code span.bu { color: #d65d0e; } /* BuiltIn */
      code span.cf { color: #cc241d; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #b16286; } /* Char */
      code span.cn { color: #b16286; font-weight: bold; } /* Constant */
      code span.co { color: #928374; } /* Comment */
      code span.cv { color: #928374; } /* CommentVar */
      code span.do { color: #98971a; } /* Documentation */
      code span.dt { color: #d79921; } /* DataType */
      code span.dv { color: #f67400; } /* DecVal */
      code span.er { color: #cc241d; text-decoration: underline; } /* Error */
      code span.ex { color: #689d6a; font-weight: bold; } /* Extension */
      code span.fl { color: #f67400; } /* Float */
      code span.fu { color: #689d6a; } /* Function */
      code span.im { color: #689d6a; } /* Import */
      code span.in { color: #282828; background-color: #83a598; } /* Information */
      code span.kw { color: #ebdbb2; font-weight: bold; } /* Keyword */
      code span.op { color: #ebdbb2; } /* Operator */
      code span.ot { color: #689d6a; } /* Other */
      code span.pp { color: #d65d0e; } /* Preprocessor */
      code span.re { color: #928374; background-color: #1d2021; } /* RegionMarker */
      code span.sc { color: #b16286; } /* SpecialChar */
      code span.ss { color: #98971a; } /* SpecialString */
      code span.st { color: #98971a; } /* String */
      code span.va { color: #458588; } /* Variable */
      code span.vs { color: #98971a; } /* VerbatimString */
      code span.wa { color: #282828; background-color: #fabd2f; } /* Warning */
    </style>
        <link rel="stylesheet" href="style.css" />
        <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@devOpifex" />
    <meta name="twitter:title" content="builder - R preprocessor" />
    <meta
      name="twitter:description"
      content="An R preprocessor for the R programming language"
    />
    <meta
      name="twitter:image"
      content="https://builder.opifex.org/builder.png"
    />
  </head>
  <body>
    <main>
      <nav>
        <a href="index.html">Home</a>
        <a href="installation.html">Install</a>
        <a href="get-started.html">Get started</a>
        <details class="dropdown">
          <summary>Docs</summary>
          <div class="dropdown-content">
            <a href="config.html">Config</a>
            <a href="architecture.html">Architecture</a>
            <a href="packages.html">Packages</a>
            <a href="directives.html">Directives</a>
            <a href="macros.html">Macros</a>
            <a href="include.html">Include</a>
            <a href="headers.html">Headers</a>
            <a href="import.html">Import</a>
            <a href="fstrings.html">F-strings</a>
            <a href="const.html">Const</a>
            <a href="deconstruct.html">Deconstruct</a>
            <a href="preflight.html">Preflight</a>
            <a href="depends.html">Depends</a>
            <a href="plugins.html">Plugins</a>
            <a href="tests.html">Tests</a>
            <a href="prepend-append.html">Prepend</a>
            <a href="deadcode.html">Dead Code</a>
            <a href="sourcemap.html">Source Map</a>
            <a href="watch.html">Watch</a>
            <a href="syntax-highlighting.html">Highlighting</a>
          </div>
        </details>
      </nav>
      <h1 id="plugins">Plugins</h1>
      <p>WARNING: The plugins API is subject to change!</p>
      <p>Builder supports plugins to extend processing. Plugins are R
      packages that export a function returning a list of lifecycle
      methods. Note that all lifecycle methods are mandatory even if
      they don’t do anything.</p>
      <p>Note, you can always make use tof the <code>builder.ini</code>
      file for configuration if needed.</p>
      <hr />
      <h2 id="using-plugins">Using Plugins</h2>
      <h3 id="via-cli">Via CLI</h3>
      <p>Specify plugins with the <code>-plugin</code> flag:</p>
      <div class="sourceCode" id="cb1"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">builder</span> <span class="at">-plugin</span> package::function</span></code></pre></div>
      <h3 id="via-config-file">Via Config File</h3>
      <p>Add plugins to your <code>builder.ini</code>:</p>
      <div class="sourceCode" id="cb2"><pre
      class="sourceCode ini"><code class="sourceCode ini"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">plugin: package::function</span></span></code></pre></div>
      <h3 id="multiple-plugins">Multiple Plugins</h3>
      <p>You can use multiple plugins. They are called in order.</p>
      <p><strong>CLI:</strong></p>
      <div class="sourceCode" id="cb3"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">builder</span> <span class="at">-plugin</span> pkg1::fn1 pkg2::fn2</span></code></pre></div>
      <p><strong>Config (space-separated):</strong></p>
      <div class="sourceCode" id="cb4"><pre
      class="sourceCode ini"><code class="sourceCode ini"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">plugin: pkg1::fn1 pkg2::fn2</span></span></code></pre></div>
      <hr />
      <h2 id="developing-plugins">Developing Plugins</h2>
      <h3 id="overview">Overview</h3>
      <p>A plugin is an R function that returns a list of lifecycle
      methods. Each method is called at a specific point during the
      build process.</p>
      <p>See <a
      href="https://github.com/devOpifex/builder.air">builder.air</a>
      for a real-world example plugin.</p>
      <h3 id="lifecycle-methods">Lifecycle Methods</h3>
      <h4 id="setupinput-output">setup(input, output)</h4>
      <p>Called during initialization with the input and output
      directory paths. Use this to store configuration or perform
      one-time setup.</p>
      <h4 id="preprocessstr-file">preprocess(str, file)</h4>
      <p>Called on each file’s content <strong>before</strong> Builder
      processes it. Receives the file content as a string and should
      return the modified content.</p>
      <h4 id="postprocessstr-file">postprocess(str, file)</h4>
      <p>Called on each file’s content <strong>after</strong> Builder
      processes it. Receives the file content as a string and should
      return the modified content.</p>
      <h4 id="includetype-path-object-file">include(type, path, object,
      file)</h4>
      <p>Called for each <code>#&gt; include</code> directive with
      parsed components:</p>
      <ul>
      <li><code>type</code> - The file type (e.g., <code>"csv"</code>,
      <code>"json"</code>)</li>
      <li><code>path</code> - The file path to include</li>
      <li><code>object</code> - The variable name for the result</li>
      <li><code>file</code> - The source file being processed</li>
      </ul>
      <p>Return <code>NULL</code> to use default processing, or return a
      replacement line.</p>
      <h4 id="end">end()</h4>
      <p>Called when Builder finishes processing all files. Use this for
      cleanup or final operations.</p>
      <h3 id="examples">Examples</h3>
      <p>A simple minifier plugin that removes empty lines and joins
      with semicolons (<em>It’s doing it wrong, don’t actually use
      this!</em>):</p>
      <div class="sourceCode" id="cb5"><pre
      class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>plugin <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">list</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">setup =</span> <span class="cf">function</span>(input, output, ...) {</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Store paths or initialize state</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>   },</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>   <span class="at">preprocess =</span> <span class="cf">function</span>(str, file, ...) {</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Modify content before processing</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>     lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(str, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)[[<span class="dv">1</span>]]</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>     lines <span class="ot">&lt;-</span> lines[<span class="fu">nzchar</span>(<span class="fu">trimws</span>(lines))]</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>     <span class="fu">paste</span>(lines, <span class="at">collapse =</span> <span class="st">&quot;;&quot;</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>   },</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>   <span class="at">postprocess =</span> <span class="cf">function</span>(str, file, ...) {</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Modify content after processing</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>     str</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>   },</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">include =</span> <span class="cf">function</span>(type, path, object, file, ...) {</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Handle #&gt; include directives</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Return NULL to use default processing</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NULL</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>   <span class="at">end =</span> <span class="cf">function</span>(...) {</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Cleanup or final operations</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
      <p>A plugin that uses <a
      href="https://readr.tidyverse.org/">readr</a> to read CSV files
      (and overrides the default <code>csv</code> type which uses the
      built-in <code>read.csv</code>):</p>
      <div class="sourceCode" id="cb6"><pre
      class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>plugin <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  enabled <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">list</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">setup =</span> <span class="cf">function</span>(input, output, ...) {</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>     enabled <span class="ot">&lt;&lt;-</span> <span class="fu">requireNamespace</span>(<span class="st">&quot;readr&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>     <span class="fu">warning</span>(<span class="st">&quot;readr not installed, fallback on default `csv` support&quot;</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>   },</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>   <span class="at">preprocess =</span> <span class="cf">function</span>(str, file, ...) {},</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">postprocess =</span> <span class="cf">function</span>(str, file, ...) {},</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>   <span class="at">include =</span> <span class="cf">function</span>(type, path, object, file, ...) {</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>     <span class="cf">if</span>(<span class="sc">!</span>enabled) <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>     <span class="cf">if</span>(type <span class="sc">!=</span> <span class="st">&quot;csv&quot;</span>) <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>     readr<span class="sc">::</span><span class="fu">read_csv</span>(path)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>   },</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>   <span class="at">end =</span> <span class="cf">function</span>(...) {</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
      <p>A formatter plugin that uses <a
      href="https://github.com/posit-dev/air">air</a> to format the
      files:</p>
      <div class="sourceCode" id="cb7"><pre
      class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>plugin <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  out_dir <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">setup =</span> <span class="cf">function</span>(input, output, ...) {</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>      out_dir <span class="ot">&lt;&lt;-</span> output</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">preprocess =</span> <span class="cf">function</span>(str, file, ...) {},</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">postprocess =</span> <span class="cf">function</span>(str, file, ...) {},</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">end =</span> <span class="cf">function</span>(...) {</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">is.null</span>(out_dir)) {</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>()</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">system2</span>(<span class="st">&quot;air&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;format&quot;</span>, out_dir))</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">include =</span> <span class="cf">function</span>(type, path, object, file, ...) {}</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
      <h3 id="tips">Tips</h3>
      <ul>
      <li>Use <code>...</code> in function signatures for forward
      compatibility</li>
      <li>Methods that don’t modify content can return
      <code>NULL</code></li>
      <li>If your plugin requires configuration, read from a config file
      in <code>setup()</code></li>
      <li>Plugins are called in the order they are specified</li>
      </ul>
      <h3 id="using-r6-classes">Using R6 Classes</h3>
      <p>For plugins with complex state or when you want inheritance,
      you can use R6 classes:</p>
      <div class="sourceCode" id="cb8"><pre
      class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>Plugin <span class="ot">&lt;-</span> R6<span class="sc">::</span><span class="fu">R6Class</span>(<span class="st">&quot;Plugin&quot;</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">private =</span> <span class="fu">list</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">out_dir =</span> <span class="cn">NULL</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">file_count =</span> <span class="dv">0</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">public =</span> <span class="fu">list</span>(</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">setup =</span> <span class="cf">function</span>(input, output, ...) {</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>      private<span class="sc">$</span>out_dir <span class="ot">&lt;-</span> output</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">preprocess =</span> <span class="cf">function</span>(str, file, ...) {</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>      str</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">postprocess =</span> <span class="cf">function</span>(str, file, ...) {</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>      private<span class="sc">$</span>file_count <span class="ot">&lt;-</span> private<span class="sc">$</span>file_count <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>      str</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">include =</span> <span class="cf">function</span>(type, path, object, file, ...) {</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NULL</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">end =</span> <span class="cf">function</span>(...) {</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="fu">sprintf</span>(<span class="st">&quot;Processed %d files&quot;</span>, private<span class="sc">$</span>file_count))</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>plugin <span class="ot">&lt;-</span> \() Plugin<span class="sc">$</span><span class="fu">new</span>()</span></code></pre></div>
      <p>This approach offers:</p>
      <ul>
      <li><strong>Encapsulated state</strong> - Private fields instead
      of <code>&lt;&lt;-</code> assignments</li>
      <li><strong>Inheritance</strong> - Create plugin families with
      shared behavior</li>
      <li><strong>Testability</strong> - Instantiate and test methods
      directly</li>
      </ul>
    </main>
  </body>
</html>
